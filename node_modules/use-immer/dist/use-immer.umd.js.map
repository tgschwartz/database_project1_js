{"version":3,"file":"use-immer.umd.js","sources":["../src/index.ts"],"sourcesContent":["import produce, { Draft } from \"immer\";\nimport { useState, useReducer, useCallback } from \"react\";\n\nexport type Reducer<S = any, A = any> = (\n  draftState: Draft<S>,\n  action: A\n) => void | S;\n\nexport function useImmer<S = any>(\n  initialValue: S | (() => S)\n): [S, (f: (draft: Draft<S>) => void | S) => void];\nexport function useImmer(initialValue: any) {\n  const [val, updateValue] = useState(initialValue);\n  return [\n    val,\n    useCallback(updater => {\n      updateValue(produce(updater));\n    }, [])\n  ];\n}\n\nexport function useImmerReducer<S = any, A = any>(\n  reducer: Reducer<S, A>,\n  initialState: S,\n  initialAction?: (initial: any) => S\n): [S, React.Dispatch<A>];\nexport function useImmerReducer(reducer, initialState, initialAction) {\n  const cachedReducer = useCallback(produce(reducer), [reducer]);\n  return useReducer(cachedReducer, initialState as any, initialAction);\n}\n"],"names":["initialValue","useState","useCallback","updater","updateValue","produce","reducer","initialState","initialAction","cachedReducer","useReducer"],"mappings":"qTAWyBA,SACIC,WAASD,gBAC7B,MAELE,uBAAYC,GACVC,EAAYC,EAAQF,KACnB,iCASyBG,EAASC,EAAcC,OAC/CC,EAAgBP,cAAYG,EAAQC,GAAU,CAACA,WAC9CI,aAAWD,EAAeF,EAAqBC"}